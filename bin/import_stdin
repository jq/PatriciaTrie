#!/usr/bin/env python

import sys
import argparse
from subprocess import call

parser = argparse.ArgumentParser(
    add_help=False,
    description="Import from stdin")

parser.add_argument("-host",
    type=str,
    help="Machine's hostname",
    dest='host',
    default="localhost:8666",
    required=False)

pp = parser.parse_args(sys.argv[1:])

for line in sys.stdin:
	s = line.strip()

	if not bool(s):
		continue
		
	l = s.replace("[edit]", "").rstrip(':')
	return_code = call(["curl", "%s/api/" % pp.host, "-d", ("s=%s" % l)])
	print return_code